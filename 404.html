<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Get the current path
    const path = window.location.pathname;
    
    // Prevent redirect loops by checking if path already contains vehicle.html
    if (path.includes('vehicle.html')) {
      // We're already in a redirect loop, extract the VIN part
      const parts = path.split('/');
      let vinPart = '';
      
      // Look for a part that might be a VIN or car description
      for (let i = parts.length - 1; i >= 0; i--) {
        if (parts[i] && parts[i] !== 'vehicle.html' && parts[i] !== '404.html') {
          vinPart = parts[i];
          break;
        }
      }
      
      if (vinPart) {
        // Direct to a clean URL with just the VIN part
        window.location.href = '/vehicle.html/' + vinPart;
      } else {
        window.location.href = '/'; // Go home if no VIN found
      }
    } 
    // Original vehicle detection logic
    else if (path.includes('-') || /[A-Z0-9]{17}/.test(path)) {
      // Extract the actual VIN/car part without extra slashes
      const cleanPath = path.replace(/^\/+|\/+$/g, ''); // Remove leading/trailing slashes
      window.location.href = '/vehicle.html/' + cleanPath;
    } 
    else {
      // Not a vehicle request, go to homepage
      window.location.href = '/';
    }
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>